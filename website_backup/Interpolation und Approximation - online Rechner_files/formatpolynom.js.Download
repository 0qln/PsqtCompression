function formatCoeff(v,A){function fmt(v){var B=(Math.abs(v)>=10000)?v.toFixed(0):v.toPrecision(4),C=B.indexOf('.');if(C<0)return B;C=B.indexOf('e');if(C>0)return B;C=B.length-1;while(C>0&&B[C]=='0')--C;if(B[C]=='.')--C;return B.substring(0,C+1)}if(typeof v!='number'){if(A===!0)return(v[1]==1)?v[0]:v[0]+'/'+v[1];else return(v[1]==1)?v[0]:fmt(v[0]/v[1])}return fmt(v)}function formatPolynom(b,x,A){const B=b.length;var C,D,E="";if(x==undefined)x="x";for(var F=0;F<B;++F){if(typeof b[F]=='number'){D=Math.abs(b[F]);if(D<1e-7)continue;C=b[F]}else{C=b[F][0]/b[F][1];if(Math.abs(C)<1e-7)continue;D=[Math.abs(b[F][0]),Math.abs(b[F][1])]}if(F>0||C<0)E+=C>=0?" + ":" - ";const G=B-F-1,H=formatCoeff(D,A);if(H!="1"||G===0)E+=H;if(G===0)break;E+=x;if(G!=1)E+="<sup>"+G+"</sup>"}return E.length===0?"0":E}
